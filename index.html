<!doctype html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <title>introrobot_js</title>
        <link rel="stylesheet" href="css/iceDrone.css">
		<link rel="stylesheet" type="text/css" href="css/flightindicators.css">


		<script src="js/jquery-2.1.4.min.js"></script>
		<script src="js/jquery.flightindicators.js"></script>


        <script type="text/javascript" src="droneSensors.js"></script>

        <script type="text/javascript" src="js/zeroc-icejs-master/lib/Ice.js"></script>
        <script type="text/javascript" src="js/zeroc-icejs-master/lib/Glacier2.js"></script>
        <script type="text/javascript" src="js/zeroc-icejs-master/lib/IceStorm.js"></script>
        <script type="text/javascript" src="js/jderobot/cmdvel.js"></script>
        <script type="text/javascript" src="js/jderobot/ardroneextra.js"></script>
        <script type="text/javascript" src="js/jderobot/navdata.js"></script>
        <script type="text/javascript" src="js/jderobot/pose3d.js"></script>
        <script type="text/javascript" src="introtobot_JS.js"></script>

		<script src="js/knob/jquery.knob.min.js"></script>
    </head>
    <body>

		<h1 style = center>introrobot_js</h1>
		<label for=fader align=center> Fader </laber>
		<input id = altura type=range min=-1 max=1 value=0 id=fader orient="vertical" class=vertical step= 0.05 enabled>
		<output for=fader id=val> 0 </output>



        <canvas id="canvas" width="220" height="140" style="border: 1px solid black" >Your browser does not support the HTML5 canvas tag.</canvas>

        <input id = knob class="knob" data-width="150" data-min="-1" data-max="1" data-angleOffset="-125" data-angleArc=250 data-step = 0.01 data-cursor=true data-fgColor="#222222" data-thickness=.2 value="0" >
        
		<input class="knob" data-width="75" data-min="-100" data-max="100" data-angleOffset="-125" data-angleArc=250 data-displayPrevious=true data-fgColor="#ffec03" data-skin="tron" data-cursor=true value="0" data-thickness=".2">

	    <button id = takeoff >Take Off</button>
        
        <button id = landing>Landing</button>

        <button id = stop>Stop</button>
        


        


    <span id="airspeed"></span>
    <span id="attitude"></span>
    <span id="altimeter"></span>
    <span id="turn_coordinator"></span>
    <span id="heading"></span>
    <span id="variometer"></span>
	
	
	<script>
			var introrobot = new introrobot_js ("10.10.49.29", 17000, 15000, 11000, 19000);
			introrobot.start();
			window.introrobot =introrobot;
			var prepareButton = function () {
				document.getElementById('takeoff').onclick = function() {
					introrobot.takeoff();
				}
				document.getElementById('landing').onclick = function() {
					introrobot.land();
				}
				document.getElementById('altura').oninput = function() {
					introrobot.altitude();
				}
				document.getElementById('stop').onclick = function() {
					introrobot.stop();
				}
			};
	
			window.onload = prepareButton;
		

	</script>
		<script>
		$(function($) {

			$(".knob").knob({
				change : function (value) {
					introrobot.rotationChange(value);
					console.log("change : " + value);
				},
				release : function (value) {
					console.log("release : " + value);
				},
				cancel : function () {
					console.log("cancel : ", this);
				},
				draw : function () {

					// "tron" case
					if(this.$.data('skin') == 'tron') {

						this.cursorExt = 0.3;

						var a = this.arc(this.cv)  // Arc
							, pa                   // Previous arc
							, r = 1;

						this.g.lineWidth = this.lineWidth;

						if (this.o.displayPrevious) {
							pa = this.arc(this.v);
							this.g.beginPath();
							this.g.strokeStyle = this.pColor;
							this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, pa.s, pa.e, pa.d);
							this.g.stroke();
						}

						this.g.beginPath();
						this.g.strokeStyle = r ? this.o.fgColor : this.fgColor ;
						this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, a.s, a.e, a.d);
						this.g.stroke();

						this.g.lineWidth = 2;
						this.g.beginPath();
						this.g.strokeStyle = this.o.fgColor;
						this.g.arc( this.xy, this.xy, this.radius - this.lineWidth + 1 + this.lineWidth * 2 / 3, 0, 2 * Math.PI, false);
						this.g.stroke();

						return false;
					}
				}
			});			
		});
</script>
	
    </body>
</html>